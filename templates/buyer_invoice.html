<!DOCTYPE html>
<html>
<head>
    <title>Invoice - {{ buyer }}</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-50 p-6">
    <div class="max-w-5xl mx-auto bg-white rounded-lg shadow-lg p-6">
        <h1 class="text-2xl font-bold mb-2">Invoice for {{ buyer }}</h1>
        <p class="text-gray-600 mb-6">Seller: <span class="font-semibold">{{ seller }}</span></p>

        <div class="overflow-x-auto border rounded-lg">
            <table class="min-w-full divide-y divide-gray-200 text-sm">
                <thead class="bg-pink-100 text-gray-700">
                    <tr>
                        <th class="px-4 py-2 text-left">Order Key</th>
                        <th class="px-4 py-2 text-left">Product</th>
                        <th class="px-4 py-2 text-center">Qty</th>
                        <th class="px-4 py-2 text-right">Unit Price</th>
                        <th class="px-4 py-2 text-right">Total</th>
                        <th class="px-4 py-2 text-left">Payment</th>
                        <th class="px-4 py-2 text-left">Date</th>
                    </tr>
                </thead>
                <tbody class="divide-y divide-gray-100">
                    {% set ns = namespace(total=0, items=0) %}
                    {% for order in orders %}
                        {% set ns.total = ns.total + order[4] %}
                        {% set ns.items = ns.items + order[2] %}
                        <tr class="hover:bg-pink-50">
                            <td class="px-4 py-2 font-mono text-pink-600">{{ order[0] }}</td>
                            <td class="px-4 py-2">{{ order[1] }}</td>
                            <td class="px-4 py-2 text-center">{{ order[2] }}</td>
                            <td class="px-4 py-2 text-right">â‚±{{ '%.2f'|format(order[3]|float) }}</td>
                            <td class="px-4 py-2 text-right font-semibold">â‚±{{ '%.2f'|format(order[4]|float) }}</td>
                            <td class="px-4 py-2">{{ order[5] }}</td>
                            <td class="px-4 py-2">{{ order[6].strftime('%B %d, %Y %H:%M') }}</td>
                        </tr>
                    {% endfor %}
                </tbody>
                <tfoot class="bg-pink-50 font-bold text-gray-700">
                    <tr>
                        <td colspan="3" class="px-4 py-2 text-right">Total Items:</td>
                        <td colspan="1" class="px-4 py-2 text-center">{{ ns.items }}</td>
                        <td colspan="1" class="px-4 py-2 text-right text-pink-600">
                            â‚±{{ '%.2f'|format(ns.total|float) }}
                        </td>
                        <td colspan="2"></td>
                    </tr>
                </tfoot>
            </table>
        </div>

        <div class="mt-6 flex justify-end gap-2">
            <button onclick="window.history.back()" 
                    class="bg-gray-400 hover:bg-gray-500 text-white px-4 py-2 rounded">
                â¬… Back
            </button>
            <button onclick="window.print()" 
                    class="bg-pink-500 hover:bg-pink-600 text-white px-4 py-2 rounded">
                ðŸ–¨ Print / Save as PDF
            </button>
        </div>
    </div>
</body>
</html>
